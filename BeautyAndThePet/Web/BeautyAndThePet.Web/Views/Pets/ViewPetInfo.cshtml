@using BeautyAndThePet.Common
@model BeautyAndThePet.Web.ViewModels.Pets.PetViewModel
@{
    this.ViewData["Title"] = Model.Name;

   var imageArray = Model.Images.ToArray();
}

<div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
    <div class="carousel-inner">
        <div class="carousel-item active">
            <img class="d-block w-50" src="/images/pets/@(Model.Images.FirstOrDefault().Id).@(Model.Images.FirstOrDefault().Extension)">
        </div>

        @for (int i = 1; i < @Model.Images.Count; i++)
        {
            <div class="carousel-item">
                <img class="d-block w-50" src="/images/pets/@(imageArray[i].Id).@(imageArray[i].Extension)">
            </div>
        }
        @*<div class="carousel-item active">
                <img class="d-block w-100" src="/images/pets/ + @Model.Images.FirstOrDefault().Id + "." + x.Images.FirstOrDefault().Extension" alt="First slide">
            </div>*@

    </div>
    <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
</div>

    <div class="col-md-6 text-center">
        <h5 class="mt-0">@Model.Name</h5>
        <p>@Model.TypeOfPet</p>
        <p>@Model.BreedName</p>
        <p>@Model.Sex</p>
        <p>@Model.StartOfPeriod.ToShortDateString()</p>
        <p>@Model.EndOfPeriod.ToShortDateString()</p>
        <p>@Model.BirthDate.ToShortDateString()</p>
        <p>@Model.Description</p>
        <p>@Model.OwnerUserName</p>
    </div>

@if (this.User.Identity.Name == Model.OwnerUserName)
{

    <a asp-controller="Pets" asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-secondary">Edit</a>
}
else
{

    <a asp-controller="Messages" asp-action="New" asp-route-id="@Model.Id" class="btn btn-secondary">Message</a>
}


@if (this.User.IsInRole(GlobalConstants.AdministratorRoleName))@*Or is owner*@
{

    @*<li class="single-meta">
            <form method="post" asp-action="Delete" id="deleteForm" asp-route-id="@Model.Id">
            </form>
            <button class="btn btn-danger" data-toggle="modal" data-target="#deleteModal">Delete</button>
        </li>
        <li class="single-meta">
            <form method="post" asp-action="SendToEmail" asp-route-id="@Model.Id">
                <button class="btn btn-warning">Send to my email</button>
            </form>
        </li>
        <li class="single-meta">
            <button class="btn btn-warning" onclick="window.print()">Print</button>
        </li>*@
}










@*<li class="page-item @if (!Model.HasPrevousPage) { <text>disabled</text>}">
        <a class="page-link" asp-action="All" asp-route-id="@Model.PrevousPageNumber">Previous</a>
    </li>

    <a asp-controller="Pets" asp-action="Create">Create pet</a>*@